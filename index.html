<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cloud Flashcards тАФ EN / HI / MR</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Improved 3D flip and responsive card sizing */
      .card-3d{ perspective:1200px; }
      .card-inner{ width:100%; height:100%; transition: transform 0.62s cubic-bezier(.2,.9,.3,1); transform-style:preserve-3d; position:relative; }
      .is-flipped .card-inner{ transform: rotateY(180deg); }
      .card-face{ backface-visibility:hidden; -webkit-backface-visibility:hidden; position:absolute; inset:0; padding:1rem; }
      .card-front{ transform: rotateY(0deg); }
      .card-back{ transform: rotateY(180deg); }
      /* subtle focus outline for accessibility */
      .focus-outline:focus{ outline:2px dashed rgba(96,165,250,0.6); outline-offset:3px; }
      /* animated gradient background */
      .bg-animated{ background: linear-gradient(90deg,#7c3aed,#06b6d4,#f97316); background-size:300% 300%; animation:grad 8s ease infinite; }
      @keyframes grad{ 0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%} }
      /* make scrollbars thinner inside answers */
      .card-scroll{ scrollbar-width: thin; max-height:10rem; overflow:auto; }
      /* speaking state */
      .speaking{ box-shadow:0 12px 40px rgba(99,102,241,0.18); transform:translateY(-4px) scale(1.01); }
      /* responsive tweaks */
      @media (max-width:640px){ .card-inner{ min-height:13rem } }
    </style>
  </head>
  <body class="min-h-screen bg-gradient-to-b from-sky-50 to-indigo-50 p-4 sm:p-6">
    <div class="max-w-6xl mx-auto">
      <header class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 rounded-full bg-animated flex items-center justify-center shadow-lg text-white font-bold">CF</div>
          <div>
            <h1 class="text-2xl sm:text-3xl font-extrabold text-slate-800">Cloud Flashcards</h1>
            <p class="text-sm text-slate-600 mt-0.5">Important Q&A тАФ English / рд╣рд┐рдиреНрджреА / рдорд░рд╛рдареА тАв Simple answers for quick learning</p>
          </div>
        </div>

        <div class="flex items-center gap-2">
          <label for="langSelect" class="text-sm text-slate-700">Language</label>
          <select id="langSelect" class="rounded-lg px-3 py-2 text-sm bg-white border shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-300">
            <option value="en" selected>English</option>
            <option value="hi">рд╣рд┐рдиреНрджреА</option>
            <option value="mr">рдорд░рд╛рдареА</option>
          </select>

          <button id="voicePref" title="Choose voice" class="px-3 py-2 bg-white border rounded-lg shadow-sm text-sm">Voice</button>

          <button id="stopAll" class="px-3 py-2 bg-red-500 text-white rounded-lg text-sm shadow-sm">Stop</button>
        </div>
      </header>

      <p id="hint" class="text-sm text-slate-600 mb-4">Tap a card to flip. Use the ЁЯФК Play button to listen (soft, slower voice). If Marathi audio is short, try Voice тЖТ select a Marathi/Hindi voice.</p>

      <main>
        <div id="cardsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
      </main>

      <footer class="mt-8 text-center text-sm text-slate-600">Designed for quick revision тАФ tap, listen, repeat.
      <p>    &copy; Buddy-for-Study</p>
      </footer>
    </div>

    <!-- Voice selection modal (hidden) -->
    <div id="voiceModal" class="fixed inset-0 hidden items-center justify-center bg-black/40 z-50">
      <div class="bg-white rounded-lg shadow-lg w-11/12 sm:w-96 p-4">
        <h3 class="font-semibold mb-2">Select preferred voice</h3>
        <div class="text-sm text-slate-600 mb-3">Pick a voice to use for speech. Choose one per language if available.</div>
        <div id="voiceList" class="max-h-56 overflow-auto space-y-2"></div>
        <div class="mt-4 flex justify-end gap-2">
          <button id="closeVoiceModal" class="px-3 py-1 rounded bg-gray-100">Close</button>
        </div>
      </div>
    </div>

    <script>
      // Simplified answers for beginners + improved audio handling
      const rawCards = [
        {
          en: { q: 'What is cloud computing?', a: 'Cloud computing gives you servers, storage and apps over the internet. You use them when needed and pay for what you use. It is more flexible and scalable than owning your own servers.' },
          hi: { q: 'рдХреНтАНрд▓рд╛рдЙрдб рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рдХреНрдпрд╛ рд╣реИ?', a: 'рдХреНрд▓рд╛рдЙрдб рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рдореЗрдВ рдЗрдВрдЯрд░рдиреЗрдЯ рдХреЗ рдЬрд╝рд░рд┐рдП рд╕рд░реНрд╡рд░, рд╕реНрдЯреЛрд░реЗрдЬ рдФрд░ рдРрдкреНрд╕ рдорд┐рд▓рддреЗ рд╣реИрдВред рдЖрдк рдЖрд╡рд╢реНрдпрдХрддрд╛ рдкрд░ рдЗрдиреНрд╣реЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЙрд╕реА рдХреЗ рдЕрдиреБрд╕рд╛рд░ рднреБрдЧрддрд╛рди рдХрд░рддреЗ рд╣реИрдВред рдпрд╣ рдЕрдкрдиреЗ рд╕рд░реНрд╡рд░реЛрдВ рд╕реЗ рдЬрд╝реНрдпрд╛рджрд╛ рд▓рдЪреАрд▓рд╛ рд╣реИред' },
          mr: { q: 'рдХреНрд▓рд╛рдЙрдб рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рдореНрд╣рдгрдЬреЗ рдХрд╛рдп?', a: 'рдХреНрд▓рд╛рдЙрдбрдордзреНрдпреЗ рдЗрдВрдЯрд░рдиреЗрдЯрд╡рд░реВрди рд╕рд░реНрд╡реНрд╣рд░, рд╕реНрдЯреЛрд░реЗрдЬ рдЖрдгрд┐ рдЕтАНреЕрдк рдорд┐рд│рддрд╛рдд. рдЧрд░рдЬреЗрдиреБрд╕рд╛рд░ рд╡рд╛рдкрд░рддрд╛ рдпреЗрддрд╛рдд рдЖрдгрд┐ рд╡рд╛рдкрд░рд╛рдиреБрд╕рд╛рд░ рдкреИрд╕реЗ рджреНрдпрд╛рд╡реЗ рд▓рд╛рдЧрддрд╛рдд. рд╣реЗ рдЖрдкрд▓реЗ рд╕реНрд╡рддрдГрдЪреЗ рд╕рд░реНрд╡реНрд╣рд░ рдареЗрд╡рдгреНрдпрд╛рдкреЗрдХреНрд╖рд╛ рдЕрдзрд┐рдХ рд▓рд╡рдЪрд┐рдХ рдЖрд╣реЗ.' }
        },
        {
          en: { q: 'Main advantages and disadvantages of cloud?', a: 'Advantages: cheaper setup, easy to scale, access from anywhere, automatic updates. Disadvantages: needs internet, possible security concerns, and dependency on provider.' },
          hi: { q: 'рдХреНрд▓рд╛рдЙрдб рдХреЗ рдлрд╛рдпрджреЗ рдФрд░ рдиреБрдХрд╕рд╛рди рдХреНрдпрд╛ рд╣реИрдВ?', a: 'рдлрд╛рдпрджреЗ: рд╕рд╕реНрддрд╛ рд╕реЗрдЯрдЕрдк, рд╕реНрдХреЗрд▓ рдХрд░рдирд╛ рдЖрд╕рд╛рди, рдХрд╣реАрдВ рд╕реЗ рднреА рдкрд╣реБрдБрдЪ, рдСрдЯреЛ рдЕрдкрдбреЗрдЯред рдиреБрдХрд╕рд╛рди: рдЗрдВрдЯрд░рдиреЗрдЯ рдЪрд╛рд╣рд┐рдП, рд╕реБрд░рдХреНрд╖рд╛ рдЪрд┐рдВрддрд╛рдПрдБ рдФрд░ рдкреНрд░рджрд╛рддрд╛ рдкрд░ рдирд┐рд░реНрднрд░рддрд╛ред' },
          mr: { q: 'рдХреНрд▓рд╛рдЙрдбрдЪреЗ рдлрд╛рдпрджреЗ рдЖрдгрд┐ рддреЛрдЯреЗ рдХрд╛рдп рдЖрд╣реЗрдд?', a: 'рдлрд╛рдпрджреЗ: рдХрдореА рдЦрд░реНрдЪ, рд╕рд╣рдЬ рд╕реНрдХреЗрд▓рд┐рдВрдЧ, рдХреБрдареВрдирд╣реА рдНрдХреНрд╕реЗрд╕, рдСрдЯреЛ рдЕрдкрдбреЗрдЯреНрд╕. рддреЛрдЯреЗ: рдЗрдВрдЯрд░рдиреЗрдЯ рд▓рд╛рдЧрддреЗ, рд╕реБрд░рдХреНрд╖рд╛ рдЪрд┐рдВрддрд╛, рдкреНрд░рджрд╛рддреНрдпрд╛рд╡рд░ рдЕрд╡рд▓рдВрдмрд┐рддреНрд╡.' }
        },
        {
          en: { q: 'How did cloud computing evolve?', a: 'It started from mainframes and timeтАСsharing, then clientтАСserver models, the internet, virtualization, and finally commercial cloud services like AWS. Each step added sharing and remote access.' },
          hi: { q: 'рдХреНрд▓рд╛рдЙрдб рдХреИрд╕реЗ рд╡рд┐рдХрд╕рд┐рдд рд╣реБрдЖ?', a: 'рдкрд╣рд▓реЗ рдореЗрдирдлреНрд░реЗрдо рдФрд░ рдЯрд╛рдЗрдотАСрд╢реЗрдпрд░рд┐рдВрдЧ рдерд╛, рдлрд┐рд░ рдХреНрд▓рд╛рдЗрдВрдЯтАСрд╕рд░реНрд╡рд░, рдЗрдВрдЯрд░рдиреЗрдЯ рдФрд░ рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдЖрдпрд╛, рдФрд░ рдмрд╛рдж рдореЗрдВ AWS рдЬреИрд╕реЗ рдХреНрд▓рд╛рдЙрдб рд╕рд░реНрд╡рд┐рд╕реЗ рдЖрдИрдВред рд╣рд░ рдЪрд░рдг рдореЗрдВ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдФрд░ рджреВрд░ рд╕реЗ рдкрд╣реБрдБрдЪрдиреЗ рдХреА рд╕реБрд╡рд┐рдзрд╛ рдмрдврд╝реАред' },
          mr: { q: 'рдХреНрд▓рд╛рдЙрдб рдХрд╕реЗ рд╡рд┐рдХрд╕рд┐рдд рдЭрд╛рд▓реЗ?', a: 'рд╕реБрд░реБрд╡рд╛рдд рдореЗрдирдлреНрд░реЗрдо рд╡ рдЯрд╛рдЗрдотАСрд╢реЗрдЕрд░рд┐рдВрдЧрдкрд╛рд╕реВрди рдЭрд╛рд▓реА, рдирдВрддрд░ рдХреНрд▓рд╛рдпрдВрдЯтАСрд╕рд░реНрд╡реНрд╣рд░, рдЗрдВрдЯрд░рдиреЗрдЯ, рд╡реНрд╣рд░реНрдЪреНрдпреБрдЕрд▓рд╛рдпрдЭреЗрд╢рди рдЖрдгрд┐ рд╢реЗрд╡рдЯреА AWS рд╕рд╛рд░рдЦреНрдпрд╛ рдХреНрд▓рд╛рдЙрдб рд╕реЗрд╡рд╛. рдкреНрд░рддреНрдпреЗрдХ рдЯрдкреНрдкреНрдпрд╛рдд рд╢реЗрдЕрд░рд┐рдВрдЧ рд╡ рд░рд┐рдореЛрдЯ рдНрдХреНрд╕реЗрд╕ рд╡рд╛рдврд▓реЗ.' }
        },
        {
          en: { q: 'Types of cloud: Public, Private, Hybrid, Community, MultiтАСCloud?', a: 'Public: anyone can use (low cost). Private: only one organization (more secure). Hybrid: mix of both. Community: shared by similar groups. MultiтАСCloud: use many providers to avoid lockтАСin.' },
          hi: { q: 'рдХреНрд▓рд╛рдЙрдб рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреМрдитАСрд╕реЗ рд╣реИрдВ?', a: 'рдкрдмреНрд▓рд┐рдХ: рд╕рдм рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдХрдо рд▓рд╛рдЧрдд). рдкреНрд░рд╛рдЗрд╡реЗрдЯ: рдХреЗрд╡рд▓ рдПрдХ рд╕рдВрдЧрдарди рдХреЗ рд▓рд┐рдП (рдЬрд╝реНрдпрд╛рджрд╛ рд╕реБрд░рдХреНрд╖рд┐рдд). рд╣рд╛рдЗрдмреНрд░рд┐рдб: рджреЛрдиреЛрдВ рдХрд╛ рдорд┐рд╢реНрд░рдг. рдХрдореНрдпреБрдирд┐рдЯреА: рдорд┐рд▓рддреЗтАСрдЬреБрд▓рддреЗ рд╕рдореВрд╣ рд╕рд╛рдЭрд╛ рдХрд░рддреЗ рд╣реИрдВ. рдорд▓реНрдЯреАтАСрдХреНрд▓рд╛рдЙрдб: рдХрдИ рдкреНрд░рджрд╛рддрд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧред' },
          mr: { q: 'рдХреНрд▓рд╛рдЙрдбрдЪреЗ рдкреНрд░рдХрд╛рд░ рдХреЛрдгрддреЗ?', a: 'рдкрдмреНрд▓рд┐рдХ: рд╕рд░реНрд╡рд╛рдВрд╕рд╛рдареА (рдХрдореА рдЦрд░реНрдЪ). рдкреНрд░рд╛рдпрд╡реНрд╣реЗрдЯ: рдПрдХрд╛ рд╕рдВрдШрдЯрдиреЗрд╕рд╛рдареА (рдЬрд╛рд╕реНрдд рд╕реБрд░рдХреНрд╖рд┐рдд). рд╣рд╛рдпрдмреНрд░рд┐рдб: рджреЛрдиреНрд╣реАрдВрдЪреЗ рдорд┐рд╢реНрд░рдг. рдХрдореНрдпреБрдирд┐рдЯреА: рд╕рд╛рд░рдЦреНрдпрд╛рдЪ рдЧрдЯрд╛рдВрдиреА рд╕рд╛рдЭрд╛. рдорд▓реНрдЯрд┐тАСрдХреНрд▓рд╛рдЙрдб: рдЕрдиреЗрдХ рдкреБрд░рд╡рдард╛рджрд╛рд░ рд╡рд╛рдкрд░рдгреЗ.' }
        },
        {
          en: { q: 'Explain IaaS, PaaS, SaaS (short).', a: 'IaaS: virtual machines and storage you manage. PaaS: platform to build apps (provider manages infra). SaaS: apps you use directly (like Gmail).' },
          hi: { q: 'IaaS, PaaS, SaaS рдХреНрдпрд╛ рд╣реИрдВ?', a: 'IaaS: рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдФрд░ рд╕реНрдЯреЛрд░реЗрдЬ рдЬреЛ рдЖрдк рдореИрдиреЗрдЬ рдХрд░рддреЗ рд╣реИрдВред PaaS: рдРрдк рдмрдирд╛рдиреЗ рдХрд╛ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо (рдкреНрд░рджрд╛рддрд╛ рдЗрдВрдлреНрд░рд╛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИ)ред SaaS: рддреИрдпрд╛рд░ рдРрдкреНрд╕ рдЬреЛ рдЖрдк рд╕реАрдзреЗ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░рддреЗ рд╣реИрдВ (рдЬреИрд╕реЗ Gmail)ред' },
          mr: { q: 'IaaS, PaaS, SaaS рдореНрд╣рдгрдЬреЗ рдХрд╛рдп?', a: 'IaaS: рддреБрдореНрд╣реА рд╡рд╛рдкрд░рдд рдЕрд╕рд▓реЗрд▓реА рд╡реНрд╣рд░реНрдЪреНрдпреБрдЕрд▓ рдорд╢реАрди рд╡ рд╕реНрдЯреЛрд░реЗрдЬ. PaaS: рдЕреЕрдк рдмрдирд╡рдгреНрдпрд╛рд╕рд╛рдареА рдкреНрд▓реЕрдЯрдлреЙрд░реНрдо (рдкреНрд░рджрд╛рддрд╛ рдЗрдВрдлреНрд░рд╛ рд╕рд╛рдВрднрд╛рд│рддреЛ). SaaS: рддреБрдореНрд╣реА рдереЗрдЯ рд╡рд╛рдкрд░рдд рдЕрд╕рд▓реЗрд▓реА рдЕреЕрдкреНрд╕ (рдЙрджрд╛. Gmail).' }
        },
        {
          en: { q: 'What is virtualization?', a: 'Virtualization makes virtual machines or virtual resources from one physical machine. It helps run many systems on one server and isolate them.' },
          hi: { q: 'рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдХреНрдпрд╛ рд╣реИ?', a: 'рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдПрдХ рднреМрддрд┐рдХ рдорд╢реАрди рд╕реЗ рдХрдИ рдЖрднрд╛рд╕реА рдорд╢реАрдиреЗрдВ рдмрдирд╛рдирд╛ рд╣реИред рдЗрд╕рд╕реЗ рдПрдХ рд╕рд░реНрд╡рд░ рдкрд░ рдХрдИ рд╕рд┐рд╕реНрдЯрдо рдЪрд▓рд╛рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЕрд▓рдЧ рд░рдЦреЗ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред' },
          mr: { q: 'рд╡реНрд╣рд░реНрдЪреНрдпреБрдЕрд▓рд╛рдпрдЭреЗрд╢рди рдореНрд╣рдгрдЬреЗ рдХрд╛рдп?', a: 'рд╡реНрд╣рд░реНрдЪреНрдпреБрдЕрд▓рд╛рдпрдЭреЗрд╢рди рдореНрд╣рдгрдЬреЗ рдПрдХрд╛ рднреМрддрд┐рдХ рдорд╢реАрдирд╡рд░реВрди рдЕрдиреЗрдХ рдЖрднрд╛рд╕реА рдорд╢реАрди рддрдпрд╛рд░ рдХрд░рдгреЗ. рдпрд╛рдореБрд│реЗ рдПрдХрд╛ рд╕рд░реНрд╡реНрд╣рд░рд╡рд░ рдЕрдиреЗрдХ рд╕рд┐рд╕реНрдЯреАрдо рдЪрд╛рд▓рддрд╛рдд рдЖрдгрд┐ рд╡реЗрдЧрд│реЗ рдареЗрд╡рддрд╛ рдпреЗрддрд╛рдд.' }
        },
        {
          en: { q: 'What is a hypervisor?', a: 'A hypervisor is software that creates and runs virtual machines. Type 1 runs on hardware, Type 2 runs on an operating system.' },
          hi: { q: 'рд╣рд╛рдЗрдкрд░рд╡рд╛рдЗрдЬрд╝рд░ рдХреНрдпрд╛ рд╣реИ?', a: 'рд╣рд╛рдЗрдкрд░рд╡рд╛рдЗрдЬрд╝рд░ рд╡рд╣ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рд╣реИ рдЬреЛ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдмрдирд╛рддрд╛ рдФрд░ рдЪрд▓рд╛рддрд╛ рд╣реИред рдЯрд╛рдЗрдктАС1 рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдкрд░ рдЪрд▓рддрд╛ рд╣реИ; рдЯрд╛рдЗрдктАС2 OS рдкрд░ рдЪрд▓рддрд╛ рд╣реИред' },
          mr: { q: 'рд╣рд╛рдпрдкрд░рд╡рд╛рдпрдЭрд░ рдореНрд╣рдгрдЬреЗ рдХрд╛рдп?', a: 'рд╣рд╛рдпрдкрд░рд╡рд╛рдпрдЭрд░ рд╣реЗ рд╕реЙрдлреНрдЯрд╡реЗрдЕрд░ рдЖрд╣реЗ рдЬреЗ рд╡реНрд╣рд░реНрдЪреНрдпреБрдЕрд▓ рдорд╢реАрди рддрдпрд╛рд░ рд╡ рдЪрд╛рд▓рд╡рддреЗ. рдЯрд╛рдЗрдктАС1 рд╣рд╛рд░реНрдбрд╡реЗрдЕрд░рд╡рд░ рдЪрд╛рд▓рддреЗ; рдЯрд╛рдЗрдктАС2 OS рд╡рд░ рдЪрд╛рд▓рддреЗ.' }
        },
        {
          en: { q: 'Why SAN (Storage Area Network) is useful in cloud?', a: 'SAN gives fast blockтАСlevel storage that many servers can share. It helps backups, high availability, and storing large amounts of data.' },
          hi: { q: 'рдХреНрд▓рд╛рдЙрдб рдореЗрдВ SAN рдХреНрдпреЛрдВ рдЙрдкрдпреЛрдЧреА рд╣реИ?', a: 'SAN рддреЗрдЬрд╝ рдмреНрд▓реЙрдХтАСрд▓реЗрд╡рд▓ рд╕реНрдЯреЛрд░реЗрдЬ рджреЗрддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдХрдИ рд╕рд░реНрд╡рд░ рд╕рд╛рдЭрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣ рдмреИрдХрдЕрдк, рдЙрдЪреНрдЪ рдЙрдкрд▓рдмреНрдзрддрд╛ рдФрд░ рдмрдбрд╝реЗ рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдорджрджрдЧрд╛рд░ рд╣реИред' },
          mr: { q: 'рдХреНрд▓рд╛рдЙрдбрдордзреНрдпреЗ SAN рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд╛ рдлрд╛рдпрджрд╛?', a: 'SAN рдЬрд▓рдж рдмреНрд▓реЙрдХтАСрд▓реЗрд╡рд▓ рд╕реНрдЯреЛрд░реЗрдЬ рджреЗрддреЗ. рдЕрдиреЗрдХ рд╕рд░реНрд╡реНрд╣рд░ рддреЗ рд╡рд╛рдкрд░реВ рд╢рдХрддрд╛рдд. рдмреЕрдХрдЕрдк, рдЙрдЪреНрдЪ рдЙрдкрд▓рдмреНрдзрддрд╛ рд╡ рдореЛрдареНрдпрд╛ рдбреЗрдЯрд╛рд╕рд╛рдареА рдЙрдкрдпреЛрдЧреА.' }
        },
        {
          en: { q: 'Benefits and use cases of IaaS (short).', a: 'Benefits: scale quickly, lower upfront cost, fast setup. Use cases: websites, dev/test, backups, big data jobs.' },
          hi: { q: 'IaaS рдХреЗ рд▓рд╛рдн рдФрд░ рдЙрдкрдпреЛрдЧ (рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ).', a: 'рд▓рд╛рдн: рддреЗрдЬрд╝ рд╕реНрдХреЗрд▓рд┐рдВрдЧ, рдХрдо рд╢реБрд░реБрдЖрддреА рдЦрд░реНрдЪ, рдлрд╛рд╕реНрдЯ рд╕реЗрдЯрдЕрдкред рдЙрдкрдпреЛрдЧ: рд╡реЗрдмрд╕рд╛рдЗрдЯ, рдбреЗрд╡рд▓рдк/рдЯреЗрд╕реНрдЯ, рдмреИрдХрдЕрдк, рдмрд┐рдЧтАСрдбреЗрдЯрд╛ред' },
          mr: { q: 'IaaS рдЪреЗ рдлрд╛рдпрджреЗ рд╡ рд╡рд╛рдкрд░ (рд╕рдВрдХреНрд╖реЗрдк).', a: 'рдлрд╛рдпрджреЗ: рдЬрд▓рдж рд╕реНрдХреЗрд▓рд┐рдВрдЧ, рдХрдореА рд╕реБрд░реБрд╡рд╛рддреАрдЪрд╛ рдЦрд░реНрдЪ, рд╡реЗрдЧрд╡рд╛рди рд╕реЗрдЯрдЕрдк. рд╡рд╛рдкрд░: рд╡реЗрдмрд╕рд╛рдЗрдЯ, dev/test, рдмреЕрдХрдЕрдк, рдмрд┐рдЧтАСрдбреЗрдЯрд╛.' }
        }
      ];

      // working cards
      const cards = rawCards;

      // elements
      const cardsGrid = document.getElementById('cardsGrid');
      const langSelect = document.getElementById('langSelect');
      const stopAllBtn = document.getElementById('stopAll');
      const voicePrefBtn = document.getElementById('voicePref');
      const voiceModal = document.getElementById('voiceModal');
      const voiceList = document.getElementById('voiceList');
      const closeVoiceModal = document.getElementById('closeVoiceModal');
      const synth = window.speechSynthesis;

      const localeMap = { en: 'en-IN', hi: 'hi-IN', mr: 'mr-IN' };

      // localStorage key for chosen voice name by language
      const VOICE_KEY = 'cf_voice_prefs_v1';

      function getStoredVoicePrefs(){ try{ return JSON.parse(localStorage.getItem(VOICE_KEY) || '{}'); }catch(e){ return {}; } }
      function setStoredVoicePref(lang, voiceName){ const s = getStoredVoicePrefs(); s[lang]=voiceName; localStorage.setItem(VOICE_KEY, JSON.stringify(s)); }

      function escapeHtml(str){ return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

      function buildCards(lang){
        cardsGrid.innerHTML = '';
        cards.forEach((item, idx) => {
          const data = item[lang] || item.en;

          const col = document.createElement('div');
          col.className = 'card-3d';

          const card = document.createElement('div');
          card.className = 'relative bg-white rounded-2xl shadow-lg overflow-hidden h-64 transform-gpu';
          card.style.minHeight = '14rem';

          const inner = document.createElement('div');
          inner.className = 'card-inner relative w-full h-full';

          const front = document.createElement('div');
          front.className = 'card-face card-front flex flex-col justify-between';
          front.innerHTML = `
            <div class="flex items-start justify-between h-full">
              <div class="p-3">
                <div class="text-xs text-indigo-500 font-semibold">Q${idx+1}</div>
                <div class="mt-2 text-base font-semibold text-slate-800">${escapeHtml(data.q)}</div>
              </div>
              <div class="flex flex-col items-end gap-3 p-3">
                <button class="playBtn bg-indigo-100 text-indigo-700 px-3 py-2 rounded-lg shadow-sm focus-outline">ЁЯФК</button>
                <button class="flipBtn bg-white border border-indigo-100 px-3 py-1 rounded-md text-sm">Flip</button>
              </div>
            </div>
          `;

          const back = document.createElement('div');
          back.className = 'card-face card-back bg-gradient-to-br from-indigo-50 to-sky-50 flex flex-col justify-between';
          back.innerHTML = `
            <div class="p-3">
              <div class="text-xs text-indigo-600 font-semibold">Answer</div>
              <div class="mt-2 text-sm text-slate-800 card-scroll">${escapeHtml(data.a)}</div>
            </div>
            <div class="p-3 flex items-center justify-between">
              <div class="text-xs text-slate-500">Tip: Read & listen twice.</div>
              <div class="flex gap-2">
                <button class="playBtn bg-emerald-100 text-emerald-700 px-3 py-2 rounded-lg shadow-sm focus-outline">ЁЯФК</button>
                <button class="flipBtn bg-white border border-indigo-100 px-3 py-1 rounded-md text-sm">Flip</button>
              </div>
            </div>
          `;

          inner.appendChild(front);
          inner.appendChild(back);
          card.appendChild(inner);
          col.appendChild(card);

          // events
          const flipButtons = col.querySelectorAll('.flipBtn');
          flipButtons.forEach(btn => btn.addEventListener('click', (e)=>{ e.stopPropagation(); col.classList.toggle('is-flipped'); }));

          card.addEventListener('click', (e)=>{ if(!e.target.closest('button')) col.classList.toggle('is-flipped'); });

          const playButtons = col.querySelectorAll('.playBtn');
          playButtons.forEach(pb => pb.addEventListener('click', (e)=>{ e.stopPropagation(); speakQnA(data.q, data.a, lang, col); }));

          cardsGrid.appendChild(col);
        });
      }

      // get voices helper
      function loadVoices(){ return new Promise(resolve => {
        let voices = synth.getVoices();
        if(voices.length) return resolve(voices);
        synth.onvoiceschanged = () => resolve(synth.getVoices());
        // fallback: resolve after 1s
        setTimeout(()=> resolve(synth.getVoices()), 1000);
      }); }

      // choose best voice with preference override
      async function chooseVoiceForLang(lang){
        const voices = await loadVoices();
        if(!voices || !voices.length) return null;
        const prefs = getStoredVoicePrefs();
        if(prefs[lang]){
          const chosen = voices.find(v=>v.name===prefs[lang]);
          if(chosen) return chosen;
        }
        const locale = localeMap[lang] || 'en-IN';
        // exact match
        let v = voices.find(x=>x.lang && x.lang.toLowerCase()===locale.toLowerCase());
        if(v) return v;
        // startsWith
        const prefix = locale.split('-')[0];
        v = voices.find(x=>x.lang && x.lang.toLowerCase().startsWith(prefix));
        if(v) return v;
        // fallback: for Marathi try Hindi
        if(prefix==='mr'){ v = voices.find(x=>x.lang && x.lang.toLowerCase().startsWith('hi')); if(v) return v; }
        // prefer en-IN then any en
        v = voices.find(x=>x.lang && x.lang.toLowerCase().startsWith('en-in')) || voices.find(x=>x.lang && x.lang.toLowerCase().startsWith('en'));
        return v || voices[0];
      }

      // speak with chunking for reliability and softer tone
      async function speakQnA(question, answer, lang, cardElement){
        if(!('speechSynthesis' in window)){ alert('Speech synthesis not supported. Use Chrome or Edge.'); return; }
        synth.cancel();

        const voice = await chooseVoiceForLang(lang);
        if(!voice){ alert('No available TTS voices on this browser. Try Chrome/Edge or install system voices.'); return; }

        if(cardElement){ cardElement.classList.add('speaking'); }

        // soft settings
        const pitch = 0.9; // slightly lower for softer tone
        const rate = (lang==='en')?0.95:0.9; // slower for hi/mr

        // helper to speak text in smaller chunks (split by sentence)
        function speakChunks(text, onComplete){
          const sentences = text.split(/(?<=[.!?ред])/g).map(s=>s.trim()).filter(Boolean);
          let i=0;
          function next(){
            if(i>=sentences.length){ onComplete(); return; }
            const u = new SpeechSynthesisUtterance(sentences[i]);
            u.voice = voice; u.lang = voice.lang || localeMap[lang]; u.rate = rate; u.pitch = pitch;
            u.onend = ()=>{ i++; setTimeout(next, 200); };
            synth.speak(u);
          }
          next();
        }

        // speak question then answer
        speakChunks(question, ()=>{ setTimeout(()=> speakChunks(answer, ()=>{ if(cardElement) cardElement.classList.remove('speaking'); }), 220); });
      }

      // voice modal
      voicePrefBtn.addEventListener('click', async ()=>{
        voiceModal.classList.remove('hidden');
        voiceList.innerHTML = '<div class="text-sm text-gray-500">Loading voicesтАж</div>';
        const voices = await loadVoices();
        if(!voices || voices.length===0){ voiceList.innerHTML = '<div class="text-sm text-red-500">No voices found in this browser.</div>'; return; }
        const prefs = getStoredVoicePrefs();
        voiceList.innerHTML = '';
        const languages = ['en','hi','mr'];
        languages.forEach(lang =>{
          const heading = document.createElement('div');
          heading.className = 'font-semibold mt-3';
          heading.textContent = (lang==='en')? 'English' : (lang==='hi')? 'рд╣рд┐рдиреНрджреА' : 'рдорд░рд╛рдареА';
          voiceList.appendChild(heading);

          voices.forEach(v=>{
            const row = document.createElement('div');
            row.className = 'flex items-center justify-between p-1';
            const label = document.createElement('div');
            label.className = 'text-sm';
            label.innerHTML = `<div class="font-medium">${v.name}</div><div class="text-xs text-gray-500">${v.lang}</div>`;
            const btn = document.createElement('button');
            btn.className = 'px-2 py-1 bg-indigo-50 text-indigo-700 rounded text-sm';
            btn.textContent = (prefs[lang]===v.name)? 'Selected' : 'Select';
            btn.addEventListener('click', ()=>{ setStoredVoicePref(lang, v.name); btn.textContent = 'Selected'; });
            row.appendChild(label);
            row.appendChild(btn);
            voiceList.appendChild(row);
          });
        });
      });

      closeVoiceModal.addEventListener('click', ()=> voiceModal.classList.add('hidden'));

      // initial build
      buildCards('en');

      // language change
      langSelect.addEventListener('change', (e)=> buildCards(e.target.value));

      // stop all
      stopAllBtn.addEventListener('click', ()=>{ synth.cancel(); document.querySelectorAll('.speaking').forEach(el=>el.classList.remove('speaking')); });

      // expose for debug
      window._flashcards = cards;
    </script>
  </body>
</html>
